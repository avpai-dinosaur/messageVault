<!DOCTYPE html>
<html>
  <head>
    <style>
      body { 
        font-family: sans-serif; 
        padding: 12px; 
        margin: 0; 
      }
      .container { 
        display: flex; 
        flex-direction: column; 
        align-items: stretch; 
        gap: 10px; 
        width: 320px; 
      }

      button { padding: 8px 12px; font-size: 16px; }
      button:disabled {
        background-color: #eee;
        color: #999;
        cursor: not-allowed;
      }

      .row {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      label {
        font-size: 14px;
      }

      select, input {
        width: 100%;
        padding: 6px 8px;
        box-sizing: border-box;
        font-size: 14px;
      }

      #driveControls {
        display: none;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 8px;
        gap: 8px;
        flex-direction: column;
      }

      #driveFolderName {
        font-size: 12px;
        color: #333;
        min-height: 1.2em;
      }

      #driveFolderResults {
        min-height: 96px;
      }

      /* Status box: reserve space so popup doesn't jump */
      #status {
        min-height: 2.6em; /* reserve area for up to two lines */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        width: 100%;
        text-align: center;
      }

      #status .label { font-weight: 700; text-transform: uppercase; font-size: 18px; }
      #status .details {
        font-size: 15px;
        color: #333;
        max-width: 100%;
        overflow-x: auto;
        white-space: nowrap;
      }

      #status.saved .label { color: #137333; }    /* green */
      #status.exists .label { color: #b45309; }   /* orange */
      #status.error .label { color: #b91c1c; }    /* red */
      #status.info .label { color: #1d4ed8; }     /* blue */

      /* small visual hint for when nothing is shown */
      #status.empty .label { font-weight: 500; color: #666; text-transform: none; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <label for="destinationSelect">Save To</label>
        <select id="destinationSelect">
          <option value="local">Local Computer</option>
          <option value="drive">Google Drive</option>
        </select>
      </div>

      <div id="driveControls">
        <div class="row">
          <button id="useRootBtn" type="button">Use My Drive Root</button>
        </div>
        <div class="row">
          <input id="driveFolderSearch" type="text" placeholder="Search folder name" />
          <button id="searchFoldersBtn" type="button">Search</button>
        </div>
        <select id="driveFolderResults" size="5"></select>
        <button id="selectFolderBtn" type="button">Select Folder</button>
        <div id="driveFolderName">No folder selected.</div>
      </div>

      <button id="grabBtn">Grab Message</button>
      <div id="status" class="empty" aria-live="polite">
        <span id="statusLabel" class="label">No action yet</span>
        <span id="statusDetails" class="details"></span>
      </div>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
